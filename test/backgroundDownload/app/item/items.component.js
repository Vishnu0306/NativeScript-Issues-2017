"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = require("@angular/core");
var item_service_1 = require("./item.service");
var ItemsComponent = (function () {
    function ItemsComponent(itemService) {
        this.itemService = itemService;
    }
    ItemsComponent.prototype.ngOnInit = function () {
        this.items = this.itemService.getItems();
    };
    ItemsComponent.prototype.onTap = function () {
        var config = NSURLSessionConfiguration.backgroundSessionConfigurationWithIdentifier("org.nativescript.sample");
        var delegate = BackgroundUploadDelegate.alloc().init();
        var session = NSURLSession.sessionWithConfigurationDelegateDelegateQueue(config, delegate, null);
        console.log(session);
        var url = NSURL.URLWithString("https://httpbin.org/image");
        var task = session.downloadTaskWithURL(url);
        task.resume();
    };
    return ItemsComponent;
}());
ItemsComponent = __decorate([
    core_1.Component({
        selector: "ns-items",
        moduleId: module.id,
        templateUrl: "./items.component.html",
    }),
    __metadata("design:paramtypes", [item_service_1.ItemService])
], ItemsComponent);
exports.ItemsComponent = ItemsComponent;
var BackgroundUploadDelegate = (function (_super) {
    __extends(BackgroundUploadDelegate, _super);
    function BackgroundUploadDelegate() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    // NSURLSessionDelegate
    BackgroundUploadDelegate.prototype.URLSessionDidBecomeInvalidWithError = function (session, error) {
        console.log("URLSessionDidBecomeInvalidWithError:");
        //console.log(" - session: " + session);
        //console.log(" - error:   " + error);
    };
    BackgroundUploadDelegate.prototype.URLSessionDidReceiveChallengeCompletionHandler = function (session, challenge, comlpetionHandler) {
        //console.log("URLSessionDidFinishEventsForBackgroundURLSession: " + session + " " + challenge);
        var disposition = null;
        var credential = null;
        comlpetionHandler(disposition, credential);
    };
    BackgroundUploadDelegate.prototype.URLSessionDidFinishEventsForBackgroundURLSession = function (session) {
        console.log("URLSessionDidFinishEventsForBackgroundURLSession: " + session);
    };
    // NSURLSessionTaskDelegate
    BackgroundUploadDelegate.prototype.URLSessionTaskDidCompleteWithError = function (session, nsTask, error) {
        console.log("URLSessionTaskDidCompleteWithError");
        console.log(error);
    };
    BackgroundUploadDelegate.prototype.URLSessionTaskDidReceiveChallengeCompletionHandler = function (session, task, challenge, completionHandler) {
        console.log("URLSessionTaskDidReceiveChallengeCompletionHandler: " + session + " " + task + " " + challenge);
        var disposition = null;
        var credential = null;
        completionHandler(disposition, credential);
    };
    BackgroundUploadDelegate.prototype.URLSessionTaskDidSendBodyDataTotalBytesSentTotalBytesExpectedToSend = function (nsSession, nsTask, data, sent, expectedTotal) {
        console.log("URLSessionTaskDidSendBodyDataTotalBytesSentTotalBytesExpectedToSend");
    };
    BackgroundUploadDelegate.prototype.URLSessionTaskNeedNewBodyStream = function (session, task, need) {
        console.log("URLSessionTaskNeedNewBodyStream");
    };
    BackgroundUploadDelegate.prototype.URLSessionTaskWillPerformHTTPRedirectionNewRequestCompletionHandler = function (session, task, redirect, request, completionHandler) {
        console.log("URLSessionTaskWillPerformHTTPRedirectionNewRequestCompletionHandler");
        completionHandler(request);
    };
    // NSURLSessionDataDelegate
    BackgroundUploadDelegate.prototype.URLSessionDataTaskDidReceiveResponseCompletionHandler = function (session, dataTask, response, completionHandler) {
        console.log("URLSessionDataTaskDidReceiveResponseCompletionHandler");
        var disposition = null;
        completionHandler(disposition);
    };
    BackgroundUploadDelegate.prototype.URLSessionDataTaskDidBecomeDownloadTask = function (session, dataTask, downloadTask) {
        console.log("URLSessionDataTaskDidBecomeDownloadTask");
    };
    BackgroundUploadDelegate.prototype.URLSessionDataTaskDidReceiveData = function (session, dataTask, data) {
        console.log("URLSessionDataTaskDidReceiveData");
    };
    BackgroundUploadDelegate.prototype.URLSessionDataTaskWillCacheResponseCompletionHandler = function () {
        console.log("URLSessionDataTaskWillCacheResponseCompletionHandler");
    };
    // NSURLSessionDownloadDelegate
    BackgroundUploadDelegate.prototype.URLSessionDownloadTaskDidResumeAtOffsetExpectedTotalBytes = function (session, task, offset, expects) {
        console.log("URLSessionDownloadTaskDidResumeAtOffsetExpectedTotalBytes");
    };
    BackgroundUploadDelegate.prototype.URLSessionDownloadTaskDidWriteDataTotalBytesWrittenTotalBytesExpectedToWrite = function (session, task, data, written, expected) {
        console.log("URLSessionDownloadTaskDidWriteDataTotalBytesWrittenTotalBytesExpectedToWrite");
    };
    BackgroundUploadDelegate.prototype.URLSessionDownloadTaskDidFinishDownloadingToURL = function (session, task, url) {
        console.log("URLSessionDownloadTaskDidFinishDownloadingToURL");
        console.log(session);
        console.log(task);
        console.log(url);
    };
    return BackgroundUploadDelegate;
}(NSObject));
BackgroundUploadDelegate.ObjCProtocols = [NSURLSessionDelegate, NSURLSessionTaskDelegate, NSURLSessionDataDelegate, NSURLSessionDownloadDelegate];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaXRlbXMuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiaXRlbXMuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsc0NBQWtEO0FBR2xELCtDQUE2QztBQU83QyxJQUFhLGNBQWM7SUFHdkIsd0JBQW9CLFdBQXdCO1FBQXhCLGdCQUFXLEdBQVgsV0FBVyxDQUFhO0lBQUksQ0FBQztJQUVqRCxpQ0FBUSxHQUFSO1FBQ0ksSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLFFBQVEsRUFBRSxDQUFDO0lBQzdDLENBQUM7SUFDRCw4QkFBSyxHQUFMO1FBQ0ksSUFBSSxNQUFNLEdBQUcseUJBQXlCLENBQUMsNENBQTRDLENBQUMseUJBQXlCLENBQUMsQ0FBQztRQUMvRyxJQUFJLFFBQVEsR0FBRyx3QkFBd0IsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUN2RCxJQUFJLE9BQU8sR0FBRyxZQUFZLENBQUMsNkNBQTZDLENBQUMsTUFBTSxFQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsQ0FBQztRQUNoRyxPQUFPLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ3JCLElBQUksR0FBRyxHQUFFLEtBQUssQ0FBQyxhQUFhLENBQUMsMkJBQTJCLENBQUMsQ0FBQztRQUMxRCxJQUFJLElBQUksR0FBRyxPQUFPLENBQUMsbUJBQW1CLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDNUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO0lBQ2xCLENBQUM7SUFDTCxxQkFBQztBQUFELENBQUMsQUFqQkQsSUFpQkM7QUFqQlksY0FBYztJQUwxQixnQkFBUyxDQUFDO1FBQ1AsUUFBUSxFQUFFLFVBQVU7UUFDcEIsUUFBUSxFQUFFLE1BQU0sQ0FBQyxFQUFFO1FBQ25CLFdBQVcsRUFBRSx3QkFBd0I7S0FDeEMsQ0FBQztxQ0FJbUMsMEJBQVc7R0FIbkMsY0FBYyxDQWlCMUI7QUFqQlks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QUFPO1FBQ3ZGLE9BQU8sQ0FBQyxHQUFHLENBQUMsMkRBQTJELENBQUMsQ0FBQztJQUMxRSxDQUFDO0lBRUQsK0dBQTRFLEdBQTVFLFVBQTZFLE9BQU8sRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxRQUFRO1FBQ2xILE9BQU8sQ0FBQyxHQUFHLENBQUMsOEVBQThFLENBQUMsQ0FBQztJQUM3RixDQUFDO0lBRUQsa0ZBQStDLEdBQS9DLFVBQWdELE9BQU8sRUFBRSxJQUFJLEVBQUUsR0FBRztRQUNqRSxPQUFPLENBQUMsR0FBRyxDQUFDLGlEQUFpRCxDQUFDLENBQUM7UUFDekQsT0FBTyxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUNyQixPQUFPLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2xCLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7SUFFeEIsQ0FBQztJQUNGLCtCQUFDO0FBQUQsQ0FBQyxBQXBGRCxDQUF1QyxRQUFRO0FBRXZDLHNDQUFhLEdBQUcsQ0FBQyxvQkFBb0IsRUFBRSx3QkFBd0IsRUFBRSx3QkFBd0IsRUFBRSw0QkFBNEIsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQgfSBmcm9tIFwiQGFuZ3VsYXIvY29yZVwiO1xuXG5pbXBvcnQgeyBJdGVtIH0gZnJvbSBcIi4vaXRlbVwiO1xuaW1wb3J0IHsgSXRlbVNlcnZpY2UgfSBmcm9tIFwiLi9pdGVtLnNlcnZpY2VcIjtcblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6IFwibnMtaXRlbXNcIixcbiAgICBtb2R1bGVJZDogbW9kdWxlLmlkLFxuICAgIHRlbXBsYXRlVXJsOiBcIi4vaXRlbXMuY29tcG9uZW50Lmh0bWxcIixcbn0pXG5leHBvcnQgY2xhc3MgSXRlbXNDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuICAgIGl0ZW1zOiBJdGVtW107XG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGl0ZW1TZXJ2aWNlOiBJdGVtU2VydmljZSkgeyB9XG5cbiAgICBuZ09uSW5pdCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5pdGVtcyA9IHRoaXMuaXRlbVNlcnZpY2UuZ2V0SXRlbXMoKTtcbiAgICB9XG4gICAgb25UYXAoKXtcbiAgICAgICAgbGV0IGNvbmZpZyA9IE5TVVJMU2Vzc2lvbkNvbmZpZ3VyYXRpb24uYmFja2dyb3VuZFNlc3Npb25Db25maWd1cmF0aW9uV2l0aElkZW50aWZpZXIoXCJvcmcubmF0aXZlc2NyaXB0LnNhbXBsZVwiKTtcbiAgICAgICAgdmFyIGRlbGVnYXRlID0gQmFja2dyb3VuZFVwbG9hZERlbGVnYXRlLmFsbG9jKCkuaW5pdCgpO1xuICAgICAgICBsZXQgc2Vzc2lvbiA9IE5TVVJMU2Vzc2lvbi5zZXNzaW9uV2l0aENvbmZpZ3VyYXRpb25EZWxlZ2F0ZURlbGVnYXRlUXVldWUoY29uZmlnLGRlbGVnYXRlLCBudWxsKTtcbiAgICAgICAgY29uc29sZS5sb2coc2Vzc2lvbik7XG4gICAgICAgIGxldCB1cmw9IE5TVVJMLlVSTFdpdGhTdHJpbmcoXCJodHRwczovL2h0dHBiaW4ub3JnL2ltYWdlXCIpO1xuICAgICAgICBsZXQgdGFzayA9IHNlc3Npb24uZG93bmxvYWRUYXNrV2l0aFVSTCh1cmwpO1xuICAgICAgICB0YXNrLnJlc3VtZSgpO1xuICAgIH1cbn1cblxuXG5jbGFzcyBCYWNrZ3JvdW5kVXBsb2FkRGVsZWdhdGUgZXh0ZW5kcyBOU09iamVjdCBpbXBsZW1lbnRzIE5TVVJMU2Vzc2lvbkRlbGVnYXRlLCBOU1VSTFNlc3Npb25UYXNrRGVsZWdhdGUsIE5TVVJMU2Vzc2lvbkRhdGFEZWxlZ2F0ZSwgTlNVUkxTZXNzaW9uRG93bmxvYWREZWxlZ2F0ZSB7XG5cblx0c3RhdGljIE9iakNQcm90b2NvbHMgPSBbTlNVUkxTZXNzaW9uRGVsZWdhdGUsIE5TVVJMU2Vzc2lvblRhc2tEZWxlZ2F0ZSwgTlNVUkxTZXNzaW9uRGF0YURlbGVnYXRlLCBOU1VSTFNlc3Npb25Eb3dubG9hZERlbGVnYXRlXTtcblxuXHQvLyBOU1VSTFNlc3Npb25EZWxlZ2F0ZVxuXHRVUkxTZXNzaW9uRGlkQmVjb21lSW52YWxpZFdpdGhFcnJvcihzZXNzaW9uLCBlcnJvcikge1xuXHRcdGNvbnNvbGUubG9nKFwiVVJMU2Vzc2lvbkRpZEJlY29tZUludmFsaWRXaXRoRXJyb3I6XCIpO1xuXHRcdC8vY29uc29sZS5sb2coXCIgLSBzZXNzaW9uOiBcIiArIHNlc3Npb24pO1xuXHRcdC8vY29uc29sZS5sb2coXCIgLSBlcnJvcjogICBcIiArIGVycm9yKTtcblx0fVxuXG5cdFVSTFNlc3Npb25EaWRSZWNlaXZlQ2hhbGxlbmdlQ29tcGxldGlvbkhhbmRsZXIoc2Vzc2lvbiwgY2hhbGxlbmdlLCBjb21scGV0aW9uSGFuZGxlcikge1xuXHRcdC8vY29uc29sZS5sb2coXCJVUkxTZXNzaW9uRGlkRmluaXNoRXZlbnRzRm9yQmFja2dyb3VuZFVSTFNlc3Npb246IFwiICsgc2Vzc2lvbiArIFwiIFwiICsgY2hhbGxlbmdlKTtcblx0XHR2YXIgZGlzcG9zaXRpb24gPSBudWxsO1xuXHRcdHZhciBjcmVkZW50aWFsID0gbnVsbDtcblx0XHRjb21scGV0aW9uSGFuZGxlcihkaXNwb3NpdGlvbiwgY3JlZGVudGlhbCk7XG5cdH1cblxuXHRVUkxTZXNzaW9uRGlkRmluaXNoRXZlbnRzRm9yQmFja2dyb3VuZFVSTFNlc3Npb24oc2Vzc2lvbikge1xuXHRcdGNvbnNvbGUubG9nKFwiVVJMU2Vzc2lvbkRpZEZpbmlzaEV2ZW50c0ZvckJhY2tncm91bmRVUkxTZXNzaW9uOiBcIiArIHNlc3Npb24pO1xuXHR9XG5cblx0Ly8gTlNVUkxTZXNzaW9uVGFza0RlbGVnYXRlXG5cdFVSTFNlc3Npb25UYXNrRGlkQ29tcGxldGVXaXRoRXJyb3Ioc2Vzc2lvbiwgbnNUYXNrLCBlcnJvcikge1xuXHRcdGNvbnNvbGUubG9nKFwiVVJMU2Vzc2lvblRhc2tEaWRDb21wbGV0ZVdpdGhFcnJvclwiKTtcbiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuXHR9XG5cblx0VVJMU2Vzc2lvblRhc2tEaWRSZWNlaXZlQ2hhbGxlbmdlQ29tcGxldGlvbkhhbmRsZXIoc2Vzc2lvbiwgdGFzaywgY2hhbGxlbmdlLCBjb21wbGV0aW9uSGFuZGxlcikge1xuXHRcdGNvbnNvbGUubG9nKFwiVVJMU2Vzc2lvblRhc2tEaWRSZWNlaXZlQ2hhbGxlbmdlQ29tcGxldGlvbkhhbmRsZXI6IFwiICsgc2Vzc2lvbiArIFwiIFwiICsgdGFzayArIFwiIFwiICsgY2hhbGxlbmdlKTtcblx0XHR2YXIgZGlzcG9zaXRpb24gPSBudWxsO1xuXHRcdHZhciBjcmVkZW50aWFsID0gbnVsbDtcblx0XHRjb21wbGV0aW9uSGFuZGxlcihkaXNwb3NpdGlvbiwgY3JlZGVudGlhbCk7XG5cdH1cblxuXHRVUkxTZXNzaW9uVGFza0RpZFNlbmRCb2R5RGF0YVRvdGFsQnl0ZXNTZW50VG90YWxCeXRlc0V4cGVjdGVkVG9TZW5kKG5zU2Vzc2lvbjogTlNVUkxTZXNzaW9uLCBuc1Rhc2s6IE5TVVJMU2Vzc2lvblRhc2ssIGRhdGEsIHNlbnQ6IG51bWJlciwgZXhwZWN0ZWRUb3RhbDogbnVtYmVyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiVVJMU2Vzc2lvblRhc2tEaWRTZW5kQm9keURhdGFUb3RhbEJ5dGVzU2VudFRvdGFsQnl0ZXNFeHBlY3RlZFRvU2VuZFwiKVxuXHR9XG5cblx0VVJMU2Vzc2lvblRhc2tOZWVkTmV3Qm9keVN0cmVhbShzZXNzaW9uLCB0YXNrLCBuZWVkKSB7XG5cdFx0Y29uc29sZS5sb2coXCJVUkxTZXNzaW9uVGFza05lZWROZXdCb2R5U3RyZWFtXCIpO1xuXHR9XG5cblx0VVJMU2Vzc2lvblRhc2tXaWxsUGVyZm9ybUhUVFBSZWRpcmVjdGlvbk5ld1JlcXVlc3RDb21wbGV0aW9uSGFuZGxlcihzZXNzaW9uLCB0YXNrLCByZWRpcmVjdCwgcmVxdWVzdCwgY29tcGxldGlvbkhhbmRsZXIpIHtcblx0XHRjb25zb2xlLmxvZyhcIlVSTFNlc3Npb25UYXNrV2lsbFBlcmZvcm1IVFRQUmVkaXJlY3Rpb25OZXdSZXF1ZXN0Q29tcGxldGlvbkhhbmRsZXJcIik7XG5cdFx0Y29tcGxldGlvbkhhbmRsZXIocmVxdWVzdCk7XG5cdH1cblxuXHQvLyBOU1VSTFNlc3Npb25EYXRhRGVsZWdhdGVcblx0VVJMU2Vzc2lvbkRhdGFUYXNrRGlkUmVjZWl2ZVJlc3BvbnNlQ29tcGxldGlvbkhhbmRsZXIoc2Vzc2lvbiwgZGF0YVRhc2ssIHJlc3BvbnNlLCBjb21wbGV0aW9uSGFuZGxlcikge1xuXHRcdGNvbnNvbGUubG9nKFwiVVJMU2Vzc2lvbkRhdGFUYXNrRGlkUmVjZWl2ZVJlc3BvbnNlQ29tcGxldGlvbkhhbmRsZXJcIik7XG5cdFx0dmFyIGRpc3Bvc2l0aW9uID0gbnVsbDtcblx0XHRjb21wbGV0aW9uSGFuZGxlcihkaXNwb3NpdGlvbik7XG5cdH1cblxuXHRVUkxTZXNzaW9uRGF0YVRhc2tEaWRCZWNvbWVEb3dubG9hZFRhc2soc2Vzc2lvbiwgZGF0YVRhc2ssIGRvd25sb2FkVGFzaykge1xuXHRcdGNvbnNvbGUubG9nKFwiVVJMU2Vzc2lvbkRhdGFUYXNrRGlkQmVjb21lRG93bmxvYWRUYXNrXCIpO1xuXHR9XG5cblx0VVJMU2Vzc2lvbkRhdGFUYXNrRGlkUmVjZWl2ZURhdGEoc2Vzc2lvbiwgZGF0YVRhc2ssIGRhdGEpIHtcblxuXHRcdFx0Y29uc29sZS5sb2coXCJVUkxTZXNzaW9uRGF0YVRhc2tEaWRSZWNlaXZlRGF0YVwiKTtcblx0fVxuXG5cdFVSTFNlc3Npb25EYXRhVGFza1dpbGxDYWNoZVJlc3BvbnNlQ29tcGxldGlvbkhhbmRsZXIoKSB7XG5cdFx0Y29uc29sZS5sb2coXCJVUkxTZXNzaW9uRGF0YVRhc2tXaWxsQ2FjaGVSZXNwb25zZUNvbXBsZXRpb25IYW5kbGVyXCIpO1xuXHR9XG5cblx0Ly8gTlNVUkxTZXNzaW9uRG93bmxvYWREZWxlZ2F0ZVxuXHRVUkxTZXNzaW9uRG93bmxvYWRUYXNrRGlkUmVzdW1lQXRPZmZzZXRFeHBlY3RlZFRvdGFsQnl0ZXMoc2Vzc2lvbiwgdGFzaywgb2Zmc2V0LCBleHBlY3RzKSB7XG5cdFx0Y29uc29sZS5sb2coXCJVUkxTZXNzaW9uRG93bmxvYWRUYXNrRGlkUmVzdW1lQXRPZmZzZXRFeHBlY3RlZFRvdGFsQnl0ZXNcIik7XG5cdH1cblxuXHRVUkxTZXNzaW9uRG93bmxvYWRUYXNrRGlkV3JpdGVEYXRhVG90YWxCeXRlc1dyaXR0ZW5Ub3RhbEJ5dGVzRXhwZWN0ZWRUb1dyaXRlKHNlc3Npb24sIHRhc2ssIGRhdGEsIHdyaXR0ZW4sIGV4cGVjdGVkKSB7XG5cdFx0Y29uc29sZS5sb2coXCJVUkxTZXNzaW9uRG93bmxvYWRUYXNrRGlkV3JpdGVEYXRhVG90YWxCeXRlc1dyaXR0ZW5Ub3RhbEJ5dGVzRXhwZWN0ZWRUb1dyaXRlXCIpO1xuXHR9XG5cblx0VVJMU2Vzc2lvbkRvd25sb2FkVGFza0RpZEZpbmlzaERvd25sb2FkaW5nVG9VUkwoc2Vzc2lvbiwgdGFzaywgdXJsKSB7XG5cdFx0Y29uc29sZS5sb2coXCJVUkxTZXNzaW9uRG93bmxvYWRUYXNrRGlkRmluaXNoRG93bmxvYWRpbmdUb1VSTFwiKTtcbiAgICAgICAgY29uc29sZS5sb2coc2Vzc2lvbik7XG4gICAgICAgIGNvbnNvbGUubG9nKHRhc2spO1xuICAgICAgICBjb25zb2xlLmxvZyh1cmwpO1xuICAgICAgICBcblx0fVxufVxuIl19